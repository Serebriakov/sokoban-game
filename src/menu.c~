#include <stdlib.h>
#include <stdio.h>
#include <string.h>


void menuInit(Menu *m){
    m->nb_lignes = 0;
}


void menuAjouterLigne(Menu *m, char texte[64], MenuFonction fonction){
    strcpy(m->lignes[m->nb_lignes].texte, texte);
    m->lignes[nb_lignes].commande = fonction;
    m->nb_lignes++;
}


void menuAffiche(const Menu *m){
    int i;
    for (i=0; i<m->nb_lignes; i++){
        printf("%d : %s\n", i, m->nb_lignes.texte};
        printf("Entrez votre choix :\n");
    }
}


int menuChoix(const Menu *m){
    int num_choix;
    int ok = 0;
    while (!ok){
        scanf("%d", &num_choix);
        if ((num_choix < 0) || (num_choix >= m->nb_lignes))
            printf("Choix non valide !\n");
        else ok = 1;
    }
    return num_choix;
}


MenuBoucle(Menu *m){
    int fin = 0;
    while (!fin){
        menuAffiche(m);
        choix = menuChoix(m);
        m->lignes[choix].commande();
    }
}


void menuLibere(Menu *m){
    m->nb_lignes = 0;
}
